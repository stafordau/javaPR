<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title th:text="${title} ?: '–û—Ü–µ–Ω–∫–∞'">–û—Ü–µ–Ω–∫–∞</title>
  <link rel="stylesheet" th:href="@{/css/grades.css}">
</head>
<body>
<header class="site-header">
  <div class="container header-bar">
    <div class="brand"><span class="logo">üìò</span><strong>GradeBook</strong></div>
    <nav class="nav">
      <a th:href="@{/grades}" class="nav-link">–°–ø–∏—Å–æ–∫</a>
      <a th:href="@{/grades/new}" class="nav-link primary">–î–æ–±–∞–≤–∏—Ç—å</a>

      <a sec:authorize="isAnonymous()" th:href="@{/login}" class="nav-link">–í–æ–π—Ç–∏</a>
      <a sec:authorize="isAnonymous()" th:href="@{/register}" class="nav-link">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>

      <!-- –µ—Å–ª–∏ –≤–æ—à—ë–ª -->
      <span sec:authorize="isAuthenticated()" class="nav-link">
                –ü—Ä–∏–≤–µ—Ç, <strong sec:authentication="name"></strong>
            </span>
      <form sec:authorize="isAuthenticated()"
            th:action="@{/logout}" method="post" style="display:inline">
        <button type="submit" class="nav-link">–í—ã–π—Ç–∏</button>
      </form>
    </nav>
  </div>
</header>

<main class="container section">
  <div class="section-head">
    <h2 th:text="${title}">–ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Ü–µ–Ω–∫–∏</h2>
    <a class="btn ghost" th:href="@{/grades}">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
  </div>

  <form class="card form"
        th:action="${grade.id} != null ? @{|/grades/${grade.id}|} : @{/grades}"
        method="post" th:object="${grade}">

    <div class="grid-2">
      <div class="field" th:classappend="${#fields.hasErrors('studentName')} ? ' has-error'">
        <label for="studentName">–°—Ç—É–¥–µ–Ω—Ç <span class="req">*</span></label>
        <input id="studentName" type="text" th:field="*{studentName}" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
        <small class="error" th:if="${#fields.hasErrors('studentName')}" th:errors="*{studentName}"></small>
      </div>

      <div class="field" th:classappend="${#fields.hasErrors('subject')} ? ' has-error'">
        <label for="subject">–ü—Ä–µ–¥–º–µ—Ç <span class="req">*</span></label>
        <input id="subject" type="text" th:field="*{subject}" placeholder="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞">
        <small class="error" th:if="${#fields.hasErrors('subject')}" th:errors="*{subject}"></small>
      </div>
    </div>

    <div class="field" th:classappend="${#fields.hasErrors('grade')} ? ' has-error'">
      <label for="grade">–û—Ü–µ–Ω–∫–∞ (0‚Äì100) <span class="req">*</span></label>
      <input id="grade" type="number" min="0" max="100" th:field="*{grade}" placeholder="95">
      <small class="error" th:if="${#fields.hasErrors('grade')}" th:errors="*{grade}"></small>
    </div>

    <div class="form-actions">
      <a class="btn ghost" th:href="@{/grades}">–û—Ç–º–µ–Ω–∞</a>
      <button class="btn" type="submit"
              th:text="${grade.id} != null ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å'">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>
  </form>
</main>

</body>
</html>
