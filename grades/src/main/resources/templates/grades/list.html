<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GradeBook ‚Äî –°–ø–∏—Å–æ–∫ –æ—Ü–µ–Ω–æ–∫</title>
    <link rel="stylesheet" th:href="@{/css/grades.css}">
</head>
<body>
<header class="site-header">
    <div class="container header-bar">
        <div class="brand"><span class="logo">üìò</span><strong>GradeBook</strong></div>
        <nav class="nav">
            <a th:href="@{/grades}" class="nav-link active">–°–ø–∏—Å–æ–∫</a>
            <a th:href="@{/grades/new}" class="nav-link primary">–î–æ–±–∞–≤–∏—Ç—å</a>

            <a sec:authorize="isAnonymous()" th:href="@{/login}" class="nav-link">–í–æ–π—Ç–∏</a>
            <a sec:authorize="isAnonymous()" th:href="@{/register}" class="nav-link">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>

            <!-- –µ—Å–ª–∏ –≤–æ—à—ë–ª -->
            <span sec:authorize="isAuthenticated()" class="nav-link">
                –ü—Ä–∏–≤–µ—Ç, <strong sec:authentication="name"></strong>
            </span>
            <form sec:authorize="isAuthenticated()"
                  th:action="@{/logout}" method="post" style="display:inline">
                <button type="submit" class="nav-link">–í—ã–π—Ç–∏</button>
            </form>
        </nav>
    </div>
</header>

<main class="container section">
    <div class="section-head">
        <h2>–°–ø–∏—Å–æ–∫ –æ—Ü–µ–Ω–æ–∫</h2>
        <a class="btn" th:href="@{/grades/new}">+ –î–æ–±–∞–≤–∏—Ç—å</a>
    </div>

    <div th:if="${msg}" class="alert" th:text="${msg}"></div>

    <div class="card no-pad">
        <table class="table">
            <thead>
            <tr>
                <th>ID</th>
                <th>–°—Ç—É–¥–µ–Ω—Ç</th>
                <th>–ü—Ä–µ–¥–º–µ—Ç</th>
                <th>–û—Ü–µ–Ω–∫–∞</th>
                <th class="center" sec:authorize="hasRole('ADMIN')">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="g : ${grades}">
                <td th:text="${g.id}">1</td>
                <td th:text="${g.studentName}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</td>
                <td th:text="${g.subject}">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</td>
                <td><span class="badge" th:text="${g.grade}">95</span></td>
                <td class="row-actions" sec:authorize="hasRole('ADMIN')">
                    <a class="btn ghost" th:href="@{|/grades/${g.id}/edit|}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form th:action="@{|/grades/${g.id}/delete|}" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?');">
                        <button class="btn danger" type="submit">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(grades)}" sec:authorize="hasRole('ADMIN')">
                <td colspan="5" class="empty">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π. –ù–∞–∂–º–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å¬ª.</td>
            </tr>
            <tr th:if="${#lists.isEmpty(grades)}" sec:authorize="!hasRole('ADMIN')">
                <td colspan="4" class="empty">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π.</td>
            </tr>
            </tbody>
        </table>
    </div>
</main>
</body>
</html>
